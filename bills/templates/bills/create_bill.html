{% extends 'base_account.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'bills/css/bills.css' %}">
{% endblock %}

{% block page_header %}
    <h1 class="d-flex justify-content-center page-header">Create Bill</h1>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-12">
                <form action="{% url 'create_bill' %}" method="POST">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <select class="form-select textInput" name="customer_account" aria-label="Default select example">
                                
                                <option selected>*Select customer</option>
                                {% for customer in customers %}
                                    <option value="{{customer}}">{{customer}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-6 col-md-2">
                            {{ bill_form.bill_date | as_crispy_field }}
                        </div>
                        <div class="col-6 col-md-2">
                            {{ bill_form.due_date | as_crispy_field}}
                        </div>
                        <div class="col-6 col-md-3">
                            {{ bill_form.reference_number | as_crispy_field }}
                        </div>
                        <div class="col-6 col-md-3">
                            {{ bill_form.bill_paid | as_crispy_field }}
                        </div>
                    </div>
                    <div class="row" id="bill_lines">
                        <div class="row" id="bill_items">
                            <div class="col-12 col-md-4">
                                <input type="textarea" class="form-control textInput" id="description" name="description" placeholder="Description*" required minlength="3">
                            </div>
                            <div class="col-12 col-md-2">
                                <input type="number" class="form-control textInput quantity" id="quantity" name="quantity" placeholder="Qty*" required>
                            </div>
                            <div class="col-12 col-md-2">
                                <input type="number" class="form-control textInput price" id="price" name="price" placeholder="Price*" required>
                            </div>
                            <div class="col-12 col-md-2">
                                <input type="number" class="form-control textInput tax" id="tax" name="tax" placeholder="Tax*" required>
                            </div>
                            <div class="col-12 col-md-2">
                               <p class="d-inline-flex p-2">Total: £<span class="line-total">0.00</span></p>
                            </div>
                        </div>                                            
                    </div>
                    <div class="row button-container">
                        <div class="col-6 col-md-4">
                            <button id="add_item" class="btn btn-blue" >Add Item</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="submit-container col-3">
                            <button type="submit" class="btn green-btn btn-lg">Submit Bill</button>
                        </div>
                        <div class="col-9 d-flex flex-row-reverse bd-highlight">
                            <ul class="total-container">
                                <li>Sub Total: £<span class="sub-total">0.00</span></li>
                                <li>Tax: £<span class="tax-total">0.00</span></li>
                                <li>Total: £<span class="total">0.00</span></li>
                            </ul>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block postloadjs %}
    <script src="{% static 'bills/js/bills.js' %}"></script>
{% endblock %}